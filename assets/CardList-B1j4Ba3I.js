import{a as l,j as e,s as C,b as W,P as k,B as b,V as j,d as B,e as y,t as I,u as L,L as E,i as T}from"./index-wJG7xwkH.js";import{i as R,v as z,j as V,h as P,e as A,S as D,d as M,C as $,k as O,b as q,c as H,E as K}from"./CardBadge-CnhuruF9.js";var S;function w(){return w=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var o in s)({}).hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},w.apply(null,arguments)}const Z=t=>l.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:32,height:32},t),S||(S=l.createElement("path",{fill:"#515151",d:"m18.221 7.206 9.585 9.585a2.265 2.265 0 0 1 0 3.195l-.8.801a2.266 2.266 0 0 1-3.194 0l-7.315-7.315-7.315 7.315a2.266 2.266 0 0 1-3.194 0l-.8-.801a2.265 2.265 0 0 1 0-3.195l9.587-9.585a2.24 2.24 0 0 1 1.723-.647 2.25 2.25 0 0 1 1.723.647"}))),U=(t,n)=>{const s=t*4;return{cards:[...n].splice(0,s),isBtnVisible:n.length>s}},Y=t=>{setTimeout(()=>{t.current&&window.scrollBy({behavior:"smooth",top:window.innerHeight-t.current.getBoundingClientRect().top})},0)},G=({label:t,icon:n,value:s})=>e.jsxs("div",{className:C.container,children:[e.jsx("input",{className:C.hidden,type:"radio",id:t,name:"form",value:s}),e.jsxs("label",{htmlFor:t,className:C.label,children:[n,t]})]}),J=({name:t,label:n,icon:s,iconSize:o=32,checked:a,onChange:r})=>e.jsxs("div",{className:C.checkboxContainer,children:[e.jsx("input",{type:"checkbox",id:t,name:t,className:C.hidden,checked:a,onChange:r}),e.jsxs("label",{htmlFor:t,className:C.label,children:[e.jsx("span",{className:C.icon,style:{width:o,height:o},children:W.cloneElement(s,{width:o,height:o})}),n]})]}),Q=(t,n)=>t.filter(s=>{if(n.location&&!s.location.toLowerCase().includes(n.location.toLowerCase())||n.form&&s.form!==n.form)return!1;if(n.details){for(const o of n.details)if(!s[o])return!1}return!0}),X=t=>{const{location:n,AC:s,automatic:o,kitchen:a,TV:r,bathroom:d,form:h}=t,_={transmission:o?o.checked:!1,AC:s?s.checked:!1,kitchen:a?a.checked:!1,TV:r?r.checked:!1,bathroom:d?d.checked:!1},g={};n&&n.value&&(g.location=n.value),h&&h.value&&(g.form=h.value);const f=Object.keys(_).filter(i=>_[i]);return f.length>0&&(g.details=f),g},ee="_inputForm_zg2ei_1",te="_inputContainer_zg2ei_9",se="_label_zg2ei_18",ne="_inputBar_zg2ei_23",oe="_cityInput_zg2ei_40",ie="_locationIcon_zg2ei_60",ae="_filterSection_zg2ei_68",re="_filterTitle_zg2ei_74",ce="_checkBoxContainer_zg2ei_79",le="_btnsWrapper_zg2ei_84",de="_h3Filter_zg2ei_92",pe="_buttonContainer_zg2ei_98",me="_resetBtn_zg2ei_104",c={inputForm:ee,inputContainer:te,label:se,inputBar:ne,cityInput:oe,locationIcon:ie,filterSection:ae,filterTitle:re,checkBoxContainer:ce,btnsWrapper:le,h3Filter:de,buttonContainer:pe,resetBtn:me},ue=({cards:t,setFilteredCards:n})=>{const{resetPage:s}=l.useContext(k),o=l.useRef(null),[a,r]=l.useState(""),d=(i,p=!1)=>{p?i.querySelectorAll("input:not(#location)").forEach(x=>{(x.type==="checkbox"||x.type==="radio")&&(x.checked=!1)}):i.reset()},h=(i,p=!1)=>{a&&!i.location&&(i.location=a);const m=Q(t,i);if(s(),n(m),Object.keys(i).length>0){const x=m.length;x>0?j.success(`${x} camper${x>1?"s":""} found`):j.error("No campers found for your selection")}else p&&j("Please enter a city or select filters",{icon:"â„¹ï¸"})},_=i=>{i.preventDefault();const p=o.current.querySelector("#location"),m=p.value.trim(),x=X(o.current);m&&(r(m),d(o.current,!0),p.value=""),h(x,!!m)},g=()=>{d(o.current),r(""),n(t),s(),j.success("All filters now reset")},f=i=>{i.key==="Enter"&&(i.preventDefault(),_(i))};return e.jsx("div",{className:c.inputForm,children:e.jsxs("form",{ref:o,onSubmit:_,children:[e.jsxs("div",{className:c.inputContainer,children:[e.jsx("label",{className:c.label,htmlFor:"location",children:"Location"}),e.jsxs("div",{className:c.inputBar,children:[e.jsx(R,{className:c.locationIcon}),e.jsx("input",{className:c.cityInput,type:"text",id:"location",autoComplete:"off",placeholder:"City",onKeyDown:f})]})]}),e.jsxs("div",{className:c.filterSection,children:[e.jsx("div",{className:c.filterTitle,children:e.jsx("p",{children:"Filters"})}),e.jsxs("div",{className:c.checkBoxContainer,children:[e.jsx("h3",{className:c.h3Filter,children:"Vehicle equipment"}),e.jsx("div",{className:c.btnsWrapper,children:z.map(({name:i,label:p,icon:m})=>e.jsx(J,{name:i,label:p,icon:m},p))}),e.jsx("h3",{className:c.h3Filter,children:"Vehicle Type"}),e.jsx("div",{className:c.btnsWrapper,children:V.map(({value:i,label:p,icon:m})=>e.jsx(G,{value:i,label:p,icon:m},p))})]})]}),e.jsxs("div",{className:c.buttonContainer,children:[e.jsx(b,{type:"submit",text:"Search"}),e.jsx(b,{type:"button",text:"Reset Filters",onClick:g,className:c.resetBtn})]})]})})},he=({item:t})=>{const n=B(),o=y(P).includes(t.id),a=r=>{r.stopPropagation(),n(I(t.id)),o?j.error("Camper removed from favorites!",{duration:700}):j.success("Camper added to favorites!",{duration:900})};return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 26",stroke:o?"#E44848":"black",fill:o?"#E44848":"none",strokeWidth:"1.0",onClick:a,style:{cursor:"pointer",width:"26px",height:"24px"},children:e.jsx("path",{d:"M12 9.854L10.659 7.1705C10.326 6.506 9.7485 5.5505 8.931 4.778C8.127 4.0175 7.164 3.5 6 3.5C3.486 3.5 1.5 5.489 1.5 7.88C1.5 9.6965 2.331 10.979 4.302 12.935C4.8075 13.436 5.3835 13.9775 6.021 14.5745C7.683 16.1345 9.75 18.0755 12 20.6705C14.25 18.0755 16.317 16.1345 17.979 14.5745C18.6165 13.9775 19.194 13.4345 19.698 12.935C21.669 10.979 22.5 9.6965 22.5 7.88C22.5 5.489 20.514 3.5 18 3.5C16.8345 3.5 15.873 4.0175 15.069 4.778C14.2515 5.5505 13.674 6.506 13.341 7.1705L12 9.854ZM12.588 22.292C12.5158 22.3776 12.4257 22.4463 12.3242 22.4935C12.2226 22.5407 12.112 22.5651 12 22.5651C11.888 22.5651 11.7774 22.5407 11.6758 22.4935C11.5743 22.4463 11.4842 22.3776 11.412 22.292C9.0105 19.439 6.837 17.399 5.0475 15.7205C1.95 12.812 0 10.9835 0 7.88C0 4.6325 2.685 2 6 2C8.4 2 10.0785 3.575 11.106 5.012C11.496 5.5595 11.793 6.086 12 6.5C12.2597 5.982 12.5586 5.48456 12.894 5.012C13.9215 3.5735 15.6 2 18 2C21.315 2 24 4.6325 24 7.88C24 10.9835 22.05 12.812 18.9525 15.7205C17.163 17.4005 14.9895 19.442 12.588 22.292Z"})})},ge="_catalogContainer_10lrs_1",xe="_itemWrapper_10lrs_12",_e="_itemContent_10lrs_22",Ce="_img_10lrs_43",fe="_titleWrapper_10lrs_52",je="_itemTitle_10lrs_59",ve="_itemTitleRight_10lrs_69",be="_itemsSubtitle_10lrs_83",ye="_itemSubtitle_10lrs_89",Ne="_badgeList_10lrs_99",we="_notFound_10lrs_106",u={catalogContainer:ge,itemWrapper:xe,itemContent:_e,img:Ce,titleWrapper:fe,itemTitle:je,itemTitleRight:ve,itemsSubtitle:be,itemSubtitle:ye,badgeList:Ne,notFound:we},Te=({item:t})=>{var o,a,r;const n=L(),s=d=>{n(`/catalog/${d}`)};return e.jsxs("section",{className:u.itemWrapper,children:[e.jsx("div",{className:u.img,children:e.jsx("img",{src:((a=(o=t.gallery)==null?void 0:o[0])==null?void 0:a.thumb)||"",alt:t.name||"Camper"})}),e.jsxs("div",{className:u.itemContent,children:[e.jsxs("div",{className:u.titleWrapper,children:[e.jsxs("div",{className:u.itemTitle,children:[e.jsx("h2",{children:t.name}),e.jsxs("div",{className:u.itemTitleRight,children:[A(t.price),e.jsx(he,{item:t})]})]}),e.jsxs("div",{className:u.itemsSubtitle,children:[e.jsxs("div",{className:u.itemSubtitle,children:[e.jsx(D,{}),e.jsxs("span",{children:[t.rating," (",((r=t.reviews)==null?void 0:r.length)||0," Reviews)"]})]}),e.jsx(M,{location:t.location})]})]}),e.jsx("p",{children:t.description}),e.jsx("ul",{className:u.badgeList,children:Object.entries(t).map(([d,h])=>e.jsx($,{detail:[d,h]},d))}),e.jsx(b,{text:"Show more",onClick:()=>s(t.id)})]})]},t.id)},Se="_scrollToTop_1z0n9_1",Fe="_buttonScroll_1z0n9_8",F={scrollToTop:Se,buttonScroll:Fe},ke=l.createContext({currentPage:1,increasePage:()=>{},resetPage:()=>{}}),Be=()=>{const[t,n]=l.useState(!1),{isModalShown:s}=l.useContext(ke),o=()=>{n(window.scrollY>300)},a=()=>{window.scrollTo({top:0,behavior:"smooth"})};return l.useEffect(()=>(window.addEventListener("scroll",o),()=>{window.removeEventListener("scroll",o)}),[]),e.jsx("div",{className:F.scrollToTop,children:t&&!s&&e.jsx("button",{onClick:a,className:F.buttonScroll,children:e.jsx(Z,{})})})},Le=({data:t=[],listRef:n})=>e.jsxs("ul",{className:u.catalogContainer,ref:n,children:[t.length>0?t.map(s=>e.jsx(Te,{item:s},s.id)):e.jsx("div",{className:u.notFound,children:"Please review your query and try again!"}),e.jsx(Be,{})]}),Ee="/assets/Emptic-Dwptf_Bn.jpg",We="_section_1c7av_1",Ie="_title_1c7av_10",Re="_noItemsText_1c7av_16",ze="_imageContainer_1c7av_21",Ve="_message_1c7av_37",v={section:We,title:Ie,noItemsText:Re,imageContainer:ze,message:Ve},Pe=({resetFilters:t})=>{const[n,s]=l.useState(!1),o=L(),a=()=>{s(!0),t(),setTimeout(()=>{s(!1),o("/catalog")},250)};return e.jsx("div",{className:v.section,children:n?e.jsx(E,{}):e.jsxs(e.Fragment,{children:[e.jsx("img",{className:v.imageContainer,src:Ee,alt:"Empty"}),e.jsxs("div",{className:v.noItemsText,children:[e.jsx("h2",{className:v.title,children:"Hard choice?"}),e.jsx("p",{className:v.message,children:"Keep selecting ðŸ’• and review your favorite campervans later on!"})]}),e.jsx(b,{text:"Back to selection",onClick:a,style:{padding:"16px 4px"}})]})})},Ae="_pageContainer_a373l_1",De="_contentWrapper_a373l_8",Me="_loadMore_a373l_13",N={pageContainer:Ae,contentWrapper:De,loadMore:Me},qe=({filterCondition:t})=>{const n=B(),{campers:s}=y(O),o=y(q),a=y(H),[r,d]=l.useState([]),{currentPage:h,increasePage:_}=l.useContext(k),g=l.useRef();l.useEffect(()=>{s.length===0&&!o&&n(T())},[n,s,o]),l.useEffect(()=>{Array.isArray(s)&&d(s.filter(t))},[s,t]);const f=()=>{d(s),s.length===0&&n(T())},{cards:i,isBtnVisible:p}=U(h,r),m=()=>{_(),Y(g)};return a?e.jsx(K,{error:a}):o?e.jsx(E,{isLoading:!0}):e.jsxs("div",{className:N.pageContainer,children:[e.jsxs("div",{className:N.contentWrapper,children:[e.jsx(ue,{cards:s,setFilteredCards:d}),r.length>0?e.jsx(Le,{data:i,listRef:g}):e.jsx(Pe,{resetFilters:f})]}),p&&e.jsx(b,{className:N.loadMore,text:"Load more",onClick:m})]})};export{qe as C};
